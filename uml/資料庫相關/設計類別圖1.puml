@startuml

class auth_user {
  +id: int
  +password: varchar(128)
  +last_login: datetime
  +is_superuser: bool
  +username: varchar(150)
  +first_name: varchar(150)
  +last_name: varchar(150)
  +email: varchar(254)
  +is_staff: bool
  +is_active: bool
  +date_joined: datetime
  --
  +check_password(): bool
  +get_full_name(): str
}

class main_userprofile {
  +id: bigint
  +profile_image: varchar(100)
  +user_id: int
  +membership: varchar(10)
  +has_seen_know_modal: bool
  --
  +get_profile_info(): dict
}

class main_coin {
  +id: bigint
  +coinname: varchar(100)
  +abbreviation: varchar(100)
  +logo_url: varchar(200)
  +api_id: bigint
  --
  +get_current_price(): decimal
}

class main_bitcoinprice {
  +id: bigint
  +usd: float
  +twd: float
  +jpy: float
  +eur: float
  +market_cap: decimal
  +volume_24h: decimal
  +change_24h: decimal
  +timestamp: datetime
  +coin_id: bigint
  --
  +to_dict(): dict
}

class main_coinhistory {
  +id: bigint
  +date: datetime
  +open_price: decimal
  +high_price: decimal
  +low_price: decimal
  +close_price: decimal
  +volume: decimal
  +coin_id: bigint
  --
  +get_daily_summary(): dict
}

class main_userprofile_favorite_coin {
  +id: bigint
  +userprofile_id: bigint
  +coin_id: bigint
  --
  +add_favorite(): void
  +remove_favorite(): void
  +get_user_favorites(user_id: int): list
}

class main_coincategory {
  +id: bigint
  +name: varchar(100)
  --
  +get_category_info(): dict
}

class main_coincategoryrelation {
  +id: bigint
  +category_id: bigint
  +coin_id: bigint
}

' 關聯與多重性
auth_user "1" -- "0..1" main_userprofile : user_id
main_bitcoinprice "0..*" --> "1" main_coin : coin_id
main_coinhistory "0..*" --> "1" main_coin : coin_id
main_userprofile_favorite_coin "0..*" --> "1" main_coin : coin_id
main_userprofile_favorite_coin "0..*" --> "1" main_userprofile : userprofile_id

main_coincategoryrelation "0..*" --> "1" main_coincategory : category_id
main_coincategoryrelation "0..*" --> "1" main_coin : coin_id

@enduml
