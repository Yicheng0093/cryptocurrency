{% extends "base.html" %}

{% block title %}分析結果{% endblock %}

{% block content %}

<style>
  .chart-container {
    max-width: 300px;
    margin: 30px auto;
  }

  /* 淡入動畫 */
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(20px);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* 淡出動畫 */
  @keyframes fadeOut {
    from {
      opacity: 1;
      transform: translateY(0);
    }

    to {
      opacity: 0;
      transform: translateY(20px);
    }
  }

  .fade-in {
    opacity: 0;
    animation: fadeIn 0.8s ease-in-out forwards;
  }

  .fade-out {
    animation: fadeOut 0.5s ease-in-out forwards;
  }
</style>

<!-- 分析頁面頂部區塊 -->
<div id="page-content" class="container mt-5 fade-in text-center">

  <div id="page-content" class="container mt-5 fade-in">
    <div class="text-center mb-4">
      <h2 class="fw-bold text-primary">總分析結果</h2>
      <hr class="w-25 mx-auto" style="border-top: 3px solid #0d6efd;">
    </div>

    {% if analysis %}
    <div class="card shadow-sm mb-4 border-0 fade-in" style="animation-delay: 0.2s;">
      <div class="card-header bg-primary text-white fw-bold">分析摘要</div>
      <div class="card-body" style="white-space: pre-wrap;">{{ analysis }}</div>
    </div>
    {% endif %}
  </div>

  <script>
    // 返回按鈕淡出效果
    document.addEventListener("DOMContentLoaded", function () {
      const backBtn = document.getElementById("back-button");
      const page = document.getElementById("page-content");

      backBtn.addEventListener("click", function (e) {
        e.preventDefault();
        page.classList.remove("fade-in");
        page.classList.add("fade-out");
        setTimeout(() => {
          window.location.href = backBtn.href;
        }, 500);
      });
    });

  </script>

{% endblock %}