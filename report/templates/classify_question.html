{% extends 'base.html' %}
{% load static %}
{% block title %}多模組分類與回覆{% endblock %}
{% block content %}
    <h1>多模組分類與回覆</h1>

    <form method="post">
        {% csrf_token %}
        <label>請輸入您的問題：</label><br>
        <textarea name="user_input" rows="3" cols="50"></textarea><br><br>
        <button type="submit">送出</button>
    </form>

    {% if classifications %}
        <h2>分類結果：</h2>
        <ul>
            {% for c in classifications %}
                <li>{{ c }}</li>
            {% endfor %}
        </ul>

        <h2>模組回覆：</h2>
        {% for ans in final_answers %}
            <div style="white-space: pre-wrap; border: 1px solid #ccc; padding: 8px; margin-bottom: 10px; font-family: monospace;">
                {{ ans }}
            </div>
        {% endfor %}
    {% endif %}
    
    {% if integrated_summary %}
        <h2>整合回覆：</h2>
        <div style="white-space: pre-wrap; border:1px solid #666; background:#eee; padding:10px; font-family: monospace;">
            {{ integrated_summary }}
        </div>
    {% endif %}

{% endblock %}